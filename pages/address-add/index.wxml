<view class="container">
  <!-- 读取微信地址按钮 -->
  <button wx:if="{{!addressData}}" type="primary" class="save-btn" bindtap="readFromWx">
    📍 读取微信地址
  </button>
  
  <!-- 地址表单 -->
  <form bindsubmit="bindSave" report-submit="true">
    <view class="form-box">
      <!-- 联系人 -->
      <view class="row-wrap">
        <view class="label">联系人</view>
        <view class="label-right">
          <input 
            name="linkMan" 
            class="input" 
            type="text" 
            placeholder="姓名" 
            value="{{wxaddress ? wxaddress.userName : addressData.linkMan}}"
          />
        </view>
      </view>
      
      <!-- 手机号码 -->
      <view class="row-wrap">
        <view class="label">手机号码</view>
        <view class="label-right">
          <input 
            name="mobile" 
            class="input" 
            maxlength="11" 
            type="number" 
            placeholder="11位手机号码" 
            value="{{wxaddress ? wxaddress.telNumber : addressData.mobile}}"
          />
        </view>
      </view>
      
      <!-- 选择地区 -->
      <view class="row-wrap" bindtap="showRegionSelect">
        <view class="label">选择地区</view>
        <view class="showRegionSelect" style="{{showRegionStr != '请选择' ? 'color: #333' : ''}}">
          {{showRegionStr}}
        </view>
      </view>
      
      <!-- 详细地址 -->
      <view class="addr-details">
        <view class="label">详细地址</view>
        <view class="label-right">
          <textarea 
            hidden="{{showRegionSelect}}" 
            name="address" 
            auto-height 
            placeholder="街道门牌信息" 
            value="{{wxaddress ? wxaddress.detailInfo : addressData.address}}"
          />
        </view>
      </view>
      
      <!-- 邮编（微信地址有这个字段，可选显示） -->
      <view class="row-wrap" wx:if="{{wxaddress && wxaddress.postalCode}}">
        <view class="label">邮政编码</view>
        <view class="label-right">
          <text style="color: #999;">{{wxaddress.postalCode}}</text>
        </view>
      </view>
    </view>
    
    <!-- 保存按钮 -->
    <button type="warn" class="save-btn" formType="submit">保存地址</button>
    
    <!-- 删除按钮（编辑模式时显示） -->
    <button 
      type="default" 
      class="save-btn" 
      bindtap="deleteAddress" 
      data-id="{{addressData.id}}" 
      wx:if="{{addressData}}"
    >
      删除该地址
    </button>
  </form>
</view>

<!-- 地区选择器 -->
<region-picker 
  wx:if="{{ showRegionSelect }}" 
  bind:closeAddress="closeAddress" 
  bind:selectAddress="selectAddress" 
/>